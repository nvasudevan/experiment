%token TK_APR, TK_UC, TK_QHP, TK_ZHJNF, TK_EOTEY, TK_QSOD, TK_OK, TK_LEA, TK_GIM, TK_MPC, TK_FJKYU, TK_BVH, TK_CPZIM, TK_OIRTB, TK_XFU, TK_EX, TK_DLZY, TK_VDZB;

%nodefault

root: 'X' TK_OK DU 'U' VG | C 'P' RG | BJ CQB ZSNI TK_APR TK_EX | 'X' 'Z' DU HDHX 'M';

LWY: ZSNI TK_EOTEY XPSMA CQB TK_BVH | NNK | FV TK_VDZB L | 'S' BPMTL L 'O' | VG;

FV: 'U' A TK_OK NLOT | 'P' TK_MPC 'Q' | NNK LWY A | 'Q';

HDHX: JWC DU TK_XFU TK_QHP;

EXL: ZSNI TK_UC DU | NNK XPSMA | JWAFP TK_QSOD 'M' CQB;

BJ: RG FV;

XPSMA: A C | KJKWG 'X' TK_QSOD;

KJKWG: 'M' | TK_VDZB 'P' HDHX | JWAFP | 'Z' | VG NNK DU 'S' 'K';

DU: 'M' 'Y' XPSMA 'S' NT | TK_LEA | FJILV EXL | BJ NLOT NLOT;

QLYBP: TK_QSOD TK_APR 'Y' TK_OIRTB | E TK_EOTEY FV DU | HDHX HDHX LWY A FV | C;

BPMTL: 'O' | ;

JWC: 'X' TK_QHP C TK_MPC | TK_FJKYU PK | NT ZSNI BJ C | C EXL XPSMA;

NNK: L C | NNK L ZSNI KJKWG 'S';

NLOT: 'X' JWAFP TK_QHP | 'Q' NT | NNK BJ | ;

OYZBD: QLYBP TK_QHP | TK_EOTEY TK_OIRTB | TK_GIM TK_APR A BPMTL CQB | TK_XFU PK 'S' PK TK_GIM;

RG: VG;

CQB: L PK KJKWG | 'M' TK_ZHJNF KJKWG 'U' 'P';

PK: PK | BPMTL TK_LEA | BPMTL TK_FJKYU TK_EX;

NT: KJKWG KJKWG | TK_FJKYU JWC DU PK TK_CPZIM | TK_VDZB;

FJILV: TK_DLZY TK_OIRTB 'P' 'U' TK_EX | QLYBP VG TK_FJKYU FV 'M' | H TK_DLZY | FJILV NT | ;

A: PK QLYBP;

C: TK_EX NLOT NNK | ;

E: A | FV A | TK_QHP NT CQB TK_ZHJNF | 'Y' NNK TK_GIM NT 'S';

ZSNI: TK_XFU 'S' | 'S' 'S' TK_MPC TK_FJKYU | 'O' EXL TK_DLZY C TK_UC;

VG: FJILV | OYZBD TK_QHP FV LWY TK_UC | 'Q' | EXL 'K' TK_VDZB 'S' 'Y' | QLYBP;

H: TK_APR RG HDHX | ZSNI JWAFP | A 'K' NLOT L TK_LEA | 'K' TK_OK | VG FJILV RG;

JWAFP: BPMTL | TK_QSOD TK_MPC 'U';

L: C 'M' NLOT | QLYBP H 'Q' TK_CPZIM TK_EX | BJ ZSNI;

