%token TK_NIOY, TK_DQN, TK_WZR, TK_MD, TK_KM, TK_ZU, TK_KX, TK_AZ, TK_PSN, TK_UB, TK_WWK, TK_GHEK, TK_IGI, TK_PYBT, TK_DQDA, TK_AV;

%nodefault

root: TK_KM | V 'S' | C EJK EJK | DK PER | HJ SZQTA PER 'T';

UOP: NXN DK 'W' | 'L' AJ AY 'L' | TK_KX | QTJLY TK_GHEK TK_DQDA 'T';

DK: EJK TK_GHEK 'T' 'H' ZWXU | EJK TMYZW EJK TK_GHEK SZQTA | ZTU | WAUQD;

QMWE: WAUQD | FRRV | UOP AY TK_NIOY TK_WWK | TK_NIOY HJ TMYZW TK_MD | UOP TK_PYBT QMWE 'S';

PER: 'N' FRRV 'H' C | TK_IGI CISPP | TMYZW C UOP V | TK_NIOY ZWXU 'W' WUTCP;

WAUQD: TK_IGI | TK_WZR TK_KM | PER QTJLY TK_ZU | QMWE QMWE | TK_DQN WUTCP;

HJ: UOP QMWE C TK_IGI TK_ZU;

AY: CISPP TK_AZ PER TK_PYBT | TK_UB WAUQD | 'T' NXN TK_WZR TK_KM;

QVJCB: WAUQD HJ CISPP TK_IGI | TK_DQN | WBP TK_GHEK TK_DQDA TK_DQN | AY C V TK_WWK C | FRRV 'O' TK_DQN ZWXU;

TMYZW: AJ | WAUQD TK_KX WBP | 'T' TK_DQDA | QVJCB 'Y' PER | TK_WZR TK_KM UOP TMYZW 'S';

WUTCP: HJ | ;

FRRV: TK_GHEK NXN | TK_DQN | SZQTA TK_KX WMN ZTU TK_MD | TMYZW WUTCP ZCWR 'S' ZCWR;

ZCWR: 'S' V | TK_PYBT WBP;

ZWXU: TK_NIOY | QTJLY TK_UB HJ EJK FRRV | ZTU TK_AV 'S' | ZTU WAUQD AY | CISPP;

SZQTA: C 'T' | DK TK_DQDA QMWE | WBP TK_KX QMWE 'Y' ZWXU;

C: TK_PYBT TK_KM WAUQD | 'T' | ZTU TK_KX QVJCB;

EJK: 'S' | TK_KX;

AJ: FRRV 'O' WMN DK | DK 'O' 'L' DK | 'T' QTJLY TK_WWK NXN 'J';

WMN: 'S' 'T' QMWE 'L' TK_GHEK | ZTU 'S' TK_DQDA WMN ZWXU | ;

WBP: FRRV | 'W' | AY WUTCP 'O' 'S' | DK ZWXU 'O' TK_PSN;

V: TK_MD 'S' SZQTA TK_PYBT;

ZTU: TK_DQDA 'T' TK_AZ CISPP | C | ;

NXN: TK_DQN ZCWR QMWE TK_PYBT | ZTU 'Y' SZQTA DK V | TK_MD FRRV 'L' WMN AY;

QTJLY: C WUTCP | TK_ZU WAUQD 'J' EJK | TK_WWK DK 'T' WUTCP 'Y' | TK_ZU 'Y' WAUQD ZTU | TMYZW 'O' TK_DQN UOP;

CISPP: TK_NIOY TK_PYBT TK_MD 'T' ZCWR | QMWE WUTCP 'J' | UOP | ;

