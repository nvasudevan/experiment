%token TK_MH, TK_YSBB, TK_SAKV, TK_XUPUY, TK_KZ, TK_OW, TK_CQ, TK_GD, TK_EKRPO, TK_LFAX;

%nodefault

root: 'N' URF | TK_GD | 'J' TK_KZ BIME;

BIME: TK_MH;

URF: PZRPI BIME TK_YSBB | 'R';

MLA: TK_LFAX FI OXSQ;

WQRJ: 'R' MLA LK TK_LFAX TK_LFAX HIQO | NS | 'J';

KFSP: LK TK_YSBB TK_KZ TK_YSBB;

HIQO: WQRJ TK_LFAX TK_EKRPO BIME TK_YSBB OXSQ | URF TK_EKRPO 'N' URF B 'H' OXSQ FGTNZ TK_YSBB MLA PZRPI 'J' B;

LK: TK_MH PZRPI;

PZRPI: B | 'N';

OXSQ: VSWZS | 'H' 'P' NS TK_KZ TK_XUPUY;

FGTNZ: TK_KZ TK_XUPUY WQRJ OXSQ | TK_GD LK 'P';

B: NORKI 'Z' 'R' FI FI TK_SAKV MLA 'R' TK_GD | PZRPI MLA | 'P' PZRPI | TK_XUPUY FGTNZ 'Z' TK_SAKV VSWZS KFSP VSWZS;

VSWZS: 'N';

NORKI: WQRJ 'P' | TK_GD | TK_KZ TK_EKRPO |  | MLA TK_OW B TK_LFAX FI PZRPI;

FI: NORKI FI 'P' KFSP | FI 'Z' | B | KFSP B TK_XUPUY TK_MH KFSP URF TK_GD TK_CQ TK_CQ 'J' TK_YSBB TK_OW;

NS: TK_GD TK_XUPUY KFSP 'N' URF B HIQO | B FI | HIQO TK_SAKV | FI TK_MH KFSP FGTNZ TK_MH TK_EKRPO URF FGTNZ | TK_MH HIQO;

