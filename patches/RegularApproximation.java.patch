--- grammar-2.0/src/dk/brics/grammar/ambiguity/RegularApproximation.java	2008-03-05 08:37:30.000000000 +0000
+++ grammar-2.0/src/dk/brics/grammar/ambiguity/RegularApproximation.java.modified	2014-07-31 23:18:06.448667075 +0100
@@ -22,6 +22,8 @@
 import dk.brics.string.mlfa.MLFA;
 import dk.brics.string.mlfa.operations.MLFA2Automaton;
 
+import dk.brics.grammar.parser.Parser;
+
 /**
  * Regular approximation based on Mohri &amp; Nederhof's technique.
  */
@@ -163,6 +165,15 @@
 		return AutomataOperations.getOverlapString(overlap);
 	}
 
+    // Krish: pass Parser
+	public HorizontalOverlapString checkHorizontalOverlap(Production p, int index, Parser parser) {
+		Automaton a1 = getAutomaton(p.getEntities(), 0, index);
+		Automaton a2 = getAutomaton(p.getEntities(), index, p.getEntities().size());
+		Automaton overlap = AutomataOperations.getOverlap(a1, a2);
+		// TODO: would it help to intersect overlap with p? (dangling-else...)
+		return AutomataOperations.getHorizontalOverlapString(overlap, p, index, parser);
+	}
+
 	@Override
 	public VerticalOverlapString checkVerticalOverlap(Production p1, Production p2) {
 		Automaton a1 = getAutomaton(p1);
@@ -172,4 +183,14 @@
 		String s = overlap.getShortestExample(true);
 		return (s != null) ? new VerticalOverlapString(s) : null;
 	}
+
+    // Krish: pass Parser around to check ambiguity on each String
+	public VerticalOverlapString checkVerticalOverlap(Production p1, Production p2, Parser parser) {
+		Automaton a1 = getAutomaton(p1);
+		Automaton a2 = getAutomaton(p2);
+		Automaton overlap = a1.intersection(a2); // TODO: make combined operation for intersection+getShortestExample
+		// TODO: would it help to intersect overlap with p1/p2?
+		String s = overlap.getVerticalShortestExample(true, p1, p2, parser);
+		return (s != null) ? new VerticalOverlapString(s) : null;
+	}
 }
